<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Norway 2026 Trip App</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --primary-blue: #00205B; --norway-red: #BA0C2F; --bg-gray: #f8f9fa; }
        body { background-color: var(--bg-gray); font-family: -apple-system, sans-serif; padding-bottom: 30px; }
        .navbar { background-color: var(--primary-blue); color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        .card { border-radius: 12px; border: none; box-shadow: 0 2px 8px rgba(0,0,0,0.05); margin-bottom: 15px; }
        .btn-norway { background-color: var(--primary-blue); color: white; }
        .btn-norway:hover { color: white; opacity: 0.9; }
        .itinerary-card { border-left: 5px solid var(--norway-red); transition: 0.3s; }
        .weather-btn { background: #e3f2fd; color: #0d47a1; border: none; padding: 8px 15px; border-radius: 8px; font-size: 0.9rem; }
        .currency-box { background: #fff3f3; border: 1px solid #ffcdd2; border-radius: 10px; padding: 15px; }
        .input-group-text { background: var(--primary-blue); color: white; border: none; }
    </style>
</head>
<body>

<nav class="navbar navbar-dark p-3 sticky-top">
    <div class="container d-flex justify-content-between">
        <span class="navbar-brand mb-0 h1"><i class="fas fa-ship"></i> Norway 2026 è‡ªé§•ç³»çµ±</span>
        <button class="btn btn-outline-light btn-sm" onclick="saveToLocal()"><i class="fas fa-save"></i> å„²å­˜ä¿®æ”¹</button>
    </div>
</nav>

<div class="container mt-3">
    <div class="card p-3 mb-4">
        <h6 class="fw-bold"><i class="fas fa-calculator text-danger"></i> å³æ™‚æ›åŒ¯è¨ˆç®— (1 NOK â‰ˆ 3.0 TWD)</h6>
        <div class="row g-2 mt-2">
            <div class="col-6">
                <div class="input-group">
                    <span class="input-group-text">NOK</span>
                    <input type="number" id="nokInput" class="form-control" placeholder="é‡‘é¡" oninput="convert('nok')">
                </div>
            </div>
            <div class="col-6">
                <div class="input-group">
                    <span class="input-group-text">TWD</span>
                    <input type="number" id="twdInput" class="form-control" placeholder="é‡‘é¡" oninput="convert('twd')">
                </div>
            </div>
        </div>
        <small class="text-muted mt-2">è¨»ï¼šåŒ¯ç‡ä»¥ 3.0 ä¼°ç®—ï¼Œå¯ä¾å¯¦éš›åŒ¯ç‡æ‰‹å‹•èª¿æ•´ã€‚</small>
    </div>

    <div class="d-flex overflow-auto pb-2 mb-3 gap-2">
        <a href="https://www.yr.no/en/forecast/daily-table/1-72833/Norway/Oslo" target="_blank" class="weather-btn text-decoration-none">Oslo ğŸŒ¤ï¸</a>
        <a href="https://www.yr.no/en/forecast/daily-table/1-92416/Norway/Bergen" target="_blank" class="weather-btn text-decoration-none">Bergen ğŸŒ§ï¸</a>
        <a href="https://www.yr.no/en/forecast/daily-table/1-49340/Norway/Geiranger" target="_blank" class="weather-btn text-decoration-none">Geiranger ğŸ”ï¸</a>
        <a href="https://www.yr.no/en/forecast/daily-table/1-42036/Norway/Stavanger" target="_blank" class="weather-btn text-decoration-none">Stavanger âš“</a>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-2">
        <h5 class="fw-bold mb-0">ğŸ“… å®Œæ•´è¡Œç¨‹æ¸…å–®</h5>
        <button class="btn btn-sm btn-norway" onclick="addCustomItem()"><i class="fas fa-plus-circle"></i> æ–°å¢è¡Œç¨‹</button>
    </div>

    <div id="itinerary-container">
        </div>
</div>

<script>
    // åŒ¯ç‡å¸¸æ•¸
    const RATE = 3.0;

    // åŸå§‹è¡Œç¨‹æ•¸æ“š
    const defaultTrip = [
        { date: "7/09 D1", title: "OSL æ©Ÿå ´ -> Kristiansand", hotel: "Radisson Blu Caledonien Hotel", note: "å–è»Š(07:00), æ²¿E18å—ä¸‹" },
        { date: "7/10 D2", title: "Kristiansand -> Stavanger", hotel: "Radisson Blu Atlantic Hotel", note: "Mandal/Lindesnes åŒ…èˆ¹æ•æ’ˆè¡Œç¨‹" },
        { date: "7/11 D3", title: "è–å£‡å²©å¥è¡Œ (Preikestolen)", hotel: "Pulpit Rock Mountain Lodge", note: "ä¸‹åˆ3é»é–‹å§‹å¥è¡Œ(å»ºè­°)" },
        { date: "7/12 D4", title: "Stavanger -> Haugesund", hotel: "Radisson Hotel Haugesund", note: "æ²¿E39åŒ—ä¸Š, éœ€æ­ä¹˜æ¸¡è¼ª" },
        { date: "7/13 D5", title: "Haugesund -> Bergen", hotel: "Thon Hotel Rosenkrantz Bergen", note: "éŠè¦½å¸ƒå‘‚æ ¹ç¢¼é ­ã€å¼—ç¾…ä¼Šæ©å±±" },
        { date: "7/14 D6", title: "Bergen -> FlÃ¥m", hotel: "FlÃ¥m Marina", note: "E16å…¬è·¯, Stegasteinè§€æ™¯å°" },
        { date: "7/15 D7", title: "FlÃ¥m -> Stryn", hotel: "Stryn Kaffebar & Vertshus", note: "é•·é€”é§•é§›, è·¨è¶Šæ¾æ©å³½ç£" },
        { date: "7/16 D8", title: "Stryn -> Geiranger (1)", hotel: "Geirangerfjorden Feriesenter", note: "è€é·¹ä¹‹è·¯ã€Dalsnibbaè§€æ™¯å°" },
        { date: "7/17 D9", title: "Geiranger (2)", hotel: "Geirangerfjorden Feriesenter", note: "è“‹æœ—å„çˆ¾å³½ç£éŠèˆ¹" },
        { date: "7/18 D10", title: "Geiranger -> Ã…lesund", hotel: "Quality Hotel Ã…lesund", note: "é˜¿å…‹æ–¯æ‹‰å±±ä¿¯ç°å¸‚æ™¯" },
        { date: "7/19 D11", title: "Ã…lesund -> å…§é™¸åœ°å€", hotel: "Grand Hotel by Classic Norway", note: "å¾€Rondaneåœ‹å®¶å…¬åœ’å‰é€²" },
        { date: "7/20 D12", title: "Rondane åœ‹å®¶å…¬åœ’", hotel: "Rondane GjestegÃ¥rd", note: "é«”é©—æŒªå¨é«˜å±±èˆ‡åœ‹å®¶å…¬åœ’æ™¯è‡´" },
        { date: "7/21 D13", title: "Rondane -> Oslo (1)", hotel: "HI Oslo Haraldsheim", note: "å¸‚éƒŠå…è²»åœè»Š, æ­é›»è»Šé€²å¸‚å€" },
        { date: "7/22 D14", title: "Oslo å¸‚å€è§€å…‰ (2)", hotel: "HI Oslo Haraldsheim", note: "æ­ŒåŠ‡é™¢ã€ç¶­æ ¼è˜­é›•å¡‘å…¬åœ’" },
        { date: "7/23 D15", title: "Oslo -> æ©Ÿå ´é‚„è»Š", hotel: "Radisson Hotel Oslo Airport", note: "18:00å‰æ©Ÿå ´é‚„è»Š, éš”æ—¥æ­æ©Ÿ" },
        { date: "7/24 D16", title: "è³¦æ­¸", hotel: "æ­æ©Ÿé›¢é–‹", note: "11:00 ç­æ©Ÿ" }
    ];

    // åˆå§‹åŒ–ï¼šæª¢æŸ¥æ˜¯å¦æœ‰å„²å­˜éçš„æ•¸æ“šï¼Œå¦å‰‡è¼‰å…¥é è¨­å€¼
    let tripData = JSON.parse(localStorage.getItem('myNorwayTrip')) || defaultTrip;

    // æ›åŒ¯åŠŸèƒ½
    function convert(type) {
        const nok = document.getElementById('nokInput');
        const twd = document.getElementById('twdInput');
        if (type === 'nok') twd.value = (nok.value * RATE).toFixed(1);
        else nok.value = (twd.value / RATE).toFixed(1);
    }

    // æ¸²æŸ“è¡Œç¨‹
    function renderItinerary() {
        const container = document.getElementById('itinerary-container');
        container.innerHTML = '';
        tripData.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'card p-3 itinerary-card';
            card.innerHTML = `
                <div class="d-flex justify-content-between">
                    <span class="badge bg-danger mb-2">${item.date}</span>
                    <button class="btn btn-sm text-muted" onclick="deleteItem(${index})"><i class="fas fa-trash"></i></button>
                </div>
                <h6 class="fw-bold mb-1" contenteditable="true" onblur="updateData(${index}, 'title', this.innerText)">${item.title}</h6>
                <div class="small text-primary mb-1"><i class="fas fa-hotel"></i> <span contenteditable="true" onblur="updateData(${index}, 'hotel', this.innerText)">${item.hotel}</span></div>
                <div class="small text-muted"><i class="fas fa-info-circle"></i> <span contenteditable="true" onblur="updateData(${index}, 'note', this.innerText)">${item.note}</span></div>
            `;
            container.appendChild(card);
        });
    }

    // æ›´æ–°æ•¸æ“šå…§å®¹
    function updateData(index, field, value) {
        tripData[index][field] = value;
        saveToLocal();
    }

    // æ–°å¢è¡Œç¨‹
    function addCustomItem() {
        const newDay = { date: "New Day", title: "é»æ“Šä¿®æ”¹æ¨™é¡Œ", hotel: "ä¿®æ”¹é£¯åº—åç¨±", note: "ä¿®æ”¹å…§å®¹å‚™è¨»" };
        tripData.push(newDay);
        renderItinerary();
        saveToLocal();
    }

    // åˆªé™¤è¡Œç¨‹
    function deleteItem(index) {
        if(confirm("ç¢ºå®šè¦åˆªé™¤é€™å¤©çš„è¡Œç¨‹å—ï¼Ÿ")) {
            tripData.splice(index, 1);
            renderItinerary();
            saveToLocal();
        }
    }

    // å„²å­˜è‡³ç€è¦½å™¨ LocalStorage
    function saveToLocal() {
        localStorage.setItem('myNorwayTrip', JSON.stringify(tripData));
        console.log("æ•¸æ“šå·²å„²å­˜");
    }

    // é é¢è¼‰å…¥åŸ·è¡Œ
    window.onload = renderItinerary;
</script>

</body>
</html>
